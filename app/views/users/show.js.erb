console.log('Bien ou Bien. ??')
document.querySelector('.audio-details').innerHTML = '<%= j render "shared/audio_player_track_details", audio: @audio %>';

var audioIdData = document.querySelector('.podcast-play-button').dataset.audioId;
console.log(audioIdData);
console.log("<%= @audio.id %>");

if ("<%= @audio.id %>" === audioIdData) {
  console.log('ok');
  document.querySelector('.podcast-play-button').classList.add('play-true');
};


player.src = "<%= @url %>";

// var playBtnDiv = document.querySelector('.podcast-play-button');
// var playBtn = document.querySelector('.podcast-play-button i');
// var started = playBtnDiv.classList.contains('play-true');
// if (started) {
//   playBtn.classList.toggle('fa-play');
//   playBtn.classList.toggle('fa-volume-up');
// } else {
//   playBtn.classList.toggle('fa-volume-up');
//   playBtn.classList.toggle('fa-play');
// }
//  document.querySelector('.plyr__control').click();

// var button = document.querySelector('.podcast-play-button i');
var buttonDiv = document.querySelector('.podcast-play-button');
document.querySelector('.plyr__control').click();

var started = buttonDiv.classList.contains('play-true');
if (started) {
  // button.classList.toggle('fa-play');
  // button.classList.toggle('fa-volume-up');
  var buttons = document.querySelectorAll('.podcast-play-button a').forEach((link) => {
    link.addEventListener("click", (event) => {
      button.classList.toggle('fa-play');
      button.classList.toggle('fa-volume-up');
      event.preventDefault();
      event.stopImmediatePropagation()
      // btn.parentElement.removeAttribute("href");
      // event.classList.toggle('fa-play');
      // event.classList.toggle('fa-volume-up');
   });
  })
} else {
  console.log("nop")
}



//   })
//   button.classList.toggle('fa-play');
//   button.classList.toggle('fa-volume-up');
// };

// button.addEventListener("click", (event) => {
//   console.log(event);
// });

//     console.log(event);
//     document.querySelector('.plyr__control').click();
//     // const started = e.currentTarget.classList.contains('play-true');
//     // if (started) {
//     //   e.preventDefault();
//     //   button.classList.toggle('fa-play');
//     //   button.classList.toggle('fa-volume-up');
//     // };
//   });
// });

//   const playBtnDiv = document.querySelector('.podcast-play-button');
//   const playBtn = document.querySelector('.podcast-play-button i');

//   if (playBtnDiv) {
//     playBtnDiv.addEventListener('click',(e) => {
//       const started = playBtnDiv.classList.contains('play-true');
//       if (started) {
//         playBtn.classList.toggle('fa-play');
//         playBtn.classList.toggle('fa-volume-up');
//       } else {
//         playBtn.classList.toggle('fa-volume-up');
//         playBtn.classList.toggle('fa-play');
//       }
//     });
//     document.querySelector('.plyr__control').click();
//   };
// });

// var buttons = document.querySelectorAll('.podcast-play-button i').forEach((button) => {
//     document.querySelector('.plyr__control').click();
//     button.classList.toggle('fa-play');
//     button.classList.toggle('fa-volume-up');

//     button.addEventListener('click', (event) => {
//       console.log(button)
//       button.classList.toggle('fa-play');
//       button.classList.toggle('fa-volume-up');
//   });
// });




// function clickButton() {
//   playButtons = document.querySelectorAll('.podcast-play-button').forEach((playButton) => {
//     playButton.addEventListener('click', (event) => {
//       document.querySelector('.plyr__control').click();
//       console.log('coucou');
//     });
//   });

// }

// clickButton();

// document.querySelector('.plyr__control').click()

// player.source = {
//     type: 'audio',
//     title: 'Example title',
//     sources: [
//         {
//             src: "<%= @url %>",
//             type: 'audio/mp3',
//         }
//     ]
// };


// 1. eventlistener sur les coeurs
// 2. récupere à partir du current_user l'id de la first playlist
// 3. récupérer l'id de l'audio en passant un params
// 4. créer un routing au niveau de l'api + méthode avec création de l'instance de AudiosPlaylists
// 5. renvoyer un callback en ajax + colorier le coeur + toast
